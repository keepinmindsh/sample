- CompletableFuture 를 사용할 만한 부분은 API GATEWAY, Storefront WebApp 라고 할 수 있다. 
  이유는 Account, Inventory, Shipping Service 는 DATA BASE 와 연동하고 있기 때문이다. 

- java 환경에서 RDBMS 연동시에 아직 Async 한 인터페이스 방식을 제공하고 있지 않기 때문에 Async 개발을 해서 큰 효과를 얻기 부족하다.

- 하지만 GATEWAY 등은 REST Service 와 연동하기 때문에 Async 를 통한 성능 효과를 볼 수 있습니다. (Blocking Thread 문제 해결 등)

- 하지만 스프링프레임워크 5.0 부터 completable() 이라는 메소드를 호출하면 간단히 CompletableFuture로 변환 할 수 있습니다

---

- 쓰레드

 프로그램안에서 실행 되는 하나의 흐름 단위이다. 
 
 스레드는 동일한 메모리 영역에서 생성되고 관리되어서 상태 변이 속도가 '프로세스' 보다는 빠르지만 그래도 생성/수거에 드는 비용이 나름있다고 한다. 

- 쓰레드풀 

 생성/수거에 드는 비용을 줄이고 재사용성을 높이기 위해 풀장에다가 여러개의 쓰레드를 먼저 만들어주고 사용하기도 한다.

  newScheduledThreadPool(int corePoolSize) 

  > 1분에 한번씩 임무를 수행 시키기 위한 쓰레드 풀 1초에 한 개씩 DB에 값이 들어갈 때, 1분 평균을 구해서 다른 테이블에 집어 넣을 대 필요

  newScheduledThreadPool(int nThreads)

  > 풀장에 쓰레드를 구정적으로 몇개 놀게 해줄지 정하는 방식 제공. 항상 비슷하게 일이 많다면 세팅이 가능하다. 

  newCachedThreadPool()
    
  > 어쩔땐 일이 없지만 어쩔땐 일이 많아 질 때는 어떡하죠, 그때는 유기적으로 쓰레드의 숫자가 증가하고 감소하는 쓰레드풀도 있다. 


  - 멀티쓰레드 처리율(throughput)   임백준님의 Akka 시작하기에서 발췌

아카를 이용한 리팩토링을 끝마쳤을 때, 똑같은 컴퓨터 위에서 전과 동일한 몬테 카를로 시나리오를 수행하는데 걸리는 시간이 6시간에서 2시간으로 단축되었다. 
66%의 시간이 절약된 것이다. 결과를 확인한 사람들은 깜짝 놀랐다. 단순히 자바 스레드에서 아카로 라이브러리를 바꾸었을 뿐인데 그렇게 엄청난 차이가 있을 수 있냐며 
고개를 갸웃거렸다. 물론 이런 차이를 일반화할 수는 없다. 이런 결과 하나를 가지고 아카가 자바 스레 드보다 3배 빠르다고 말하는 어리석은 사람은 없을 것이다.
아카도 내부적으로 자 1 아카에 대하여 - 017 바 스레드를 사용하기 때문에 그런 비교 자체가 성립하지 않는다. 하지만 일반적 인 차원에서 짚고 넘어갈만한 부분도 있다. 
이렇게 커다란 차이가 어디에서 비롯 되었는지 이해하려면 우선 암달의 법칙Amdahl’s law을 생각해볼 필요가 있다. 암달의 법칙은 이렇다. 
“멀티코어를 사용하는 프로그램의 속도는 프로그램 내부에 존재하는 순차적sequential 부분이 사용하는 시간에 의해서 제한된다.” 
Thread나 Task를 만들어서 ExecutorService에게 제출하는 식으로 동시성 코드를 작성하면 여러 개의 스레드가 동시에 작업을 수행한다. 
하지만 프로그램 안에는 Thread나 Task가 포함하지 않는 코드가 존재한다. 여러 개의 스레드가 동시에 작업을 수행하더라도 synchronized 블록이나 데이터베이스, 
네트워크 API 호출 등을 만날 때 다른 스레드와 나란히 줄을 서서 순차적으로 작업을 수행 해야 하는 경우도 있다. 암달의 법칙은 프로그램이 낼 수 있는 속도의 상한이 
이런 순차적 코드가 사용하는 시간에 의해서 제한된다고 말하는 것이다. 이러한 순차적 코드의 또 다른 이름은 블로킹blocking 콜이다. 문제는 스레드 자체 가 아니라 
스레드를 사용하면서 자기도 모르게 만들어내는 블로킹 콜이다. 조금 과장해서 말하자면 자바 개발자가 스레드를 이용해서 만들어내는 ‘동시성’ 코드는 일종의 신기루다. 
사실은 코드 곳곳에 존재하는 블로킹 콜, 순차적 코드 때문에 전 체적인 프로그램의 처리율은 이미 상한이 정해져 있지만 여러 개의 스레드가 ‘동 시에’ 동작한다는 사실로부터 위안을 받을 뿐이다.
